<!DOCTYPE html>
<html lang="es">
    <head>
      <!-- ChatGpt fue utilizado en el desarrollo de esta página, principalmente para la búsqueda de errores en el código y ayuda con las funciones de filtro -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Aves de Chile por región</title>
        <style>
          @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap');

         body {
              margin: 0;
              background-color: #fefae0;
              font-family: "Raleway";
            }

            .comienzo{
              position: absolute;
              height: 628px;
              overflow: hidden;
            }

            .comienzo img{
              width: 100%;
            }

            .inicio{
              position: relative;
              margin: 0 auto;
              text-align: center;
              background-color: #333d29;
              padding: 4rem;
              height: 500px;
              width: 1000px;
              overflow: hidden;
            }


            .titulo{
              font-size: calc(1.5em + 5vw);
              color: #fefae0;
              font-weight: bold;
            }

            .subtitulo{
              color: #80875e;
              font-size: calc(1.5em + 1vw);
            }

            .intro{
              padding-top: 3rem;
              padding-left: 10rem;
              padding-right: 10rem;
              color: #fefae0;
            }


            .contenedor {
              display: flex;
              align-items: flex-start;
              gap: 2rem;
              position: relative;
              margin: auto;
              padding-top: 1rem;
              padding-left: 5rem;
            }

            .pajaro-volando {
              position: absolute;
              left: -10px;
              top: 670px;
              width: 80px;
              animation: volar 20s ease-in-out infinite;
              z-index: 10;
              pointer-events: none;
            }

            .pajaro-volando img {
              width: 50%;
              height: auto;
            }

            @keyframes volar {
              0% {
                left: -10px;
                transform: translateY(0px) rotate(0deg);
              }
              20% {
                transform: translateY(-10px) rotate(5deg);
              }
              40% {
                transform: translateY(10px) rotate(-5deg);
              }
              60% {
                transform: translateY(-10px) rotate(3deg);
              }
              80% {
                transform: translateY(5px) rotate(-3deg);
              }
              100% {
                left: 100%;
                transform: translateY(0px) rotate(0deg);
              }
            }

            .zonas{
              background-color: #a4ac87;
              margin-top: 6rem;
              margin-bottom: 6rem;
            }

            .elige{
              padding-top: 2rem;
              color: #333d29;
              font-size: calc(1.5em + 1vw);
              text-align: center;
            }

            .instrucción{
              font-size: 1.2em;
              font-weight: 500;
              text-align: center;
              color: #333d29;
              padding-bottom: 2rem;
            }

            .chico{
              display: inline-block;
              padding-left: 3rem;
              max-width: 100px;
              height: auto;
              border: 1px solid #333d29;
            }

            .zonacontenido img{
              display: inline-block;
              position: absolute;
              max-width: 1000px;
              height: auto;
            }

            .rango{
              background-color: #333d29;
              height: 350px;
              margin-top: 15rem;
            }

            .filtra{
              font-size: calc(1.5em + 1vw);
              padding-top: 5rem;
              text-align: center;
              color: #a4ac87;              
            }

            .zonaselector {
              display: flex;
              gap: 1rem;
              margin-top: 5rem;
              justify-content: center;
            }

            .zonaselector button {
              background-color: #a4ac87;
              color: #333d29;
              padding: 1.5rem 4rem;
              font-size: 1.5rem;
              border: none;
              border-radius: 8px;
              cursor: pointer;
              transition: 0.3s;
            }

            .zonaselector button.activo {
              background-color: #fefae0;
              color: #333d29;
              transform: scale(1.05);
            }


            .zonaselector button:hover {
              background-color: #596046;
            }

            .resultado-aves {
              margin: 2rem auto;
              padding: 1rem;
              max-width: 1300px;
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 1rem;
            }

            .ave {
              background-color: #a4ac87;
              border-left: 5px solid #333d29;
              padding: 1rem;
              margin-bottom: 1rem;
              border-radius: 6px;
            }

            .ave h3 {
              margin: 0 0 0.5rem 0;
              color: #fefae0;
            }

            .ave p {
                margin: 0.2rem 0;
                color: #333d29;
              }

            .piepagina {
              background-color: #333d29;
              color: #fefae0;
              text-align: center;
              padding: 1.5rem 0;
              font-size: 1rem;
              margin-top: 4rem;
            }

        </style>
    </head>
    <body>

        <div class="comienzo">
          <img src="fondo.jpg" alt="Fondo" />
        </div>


        <div class="inicio">
          <h1 class="titulo">Aves de Chile</h1>
          <h2 class="subtitulo">Según la zona en la que habitan</h2>
          <p class="intro">Chile se caracteriza por una gran diversidad de ecosistemas, producto de su extensa geografía que abarca desde el desierto más árido del mundo hasta los fríos bosques australes. Para comprender mejor esta riqueza natural, el país ha sido dividido en distintas zonas geográficas, cada una con condiciones climáticas y ambientales únicas que influyen directamente en la presencia y distribución de sus aves.</p>
        </div>


        <div class="pajaro-volando">
          <img src="pajaro.png" alt="Pájaro volando" />
        </div>


        <div class="zonas">
          <h2 class="elige">¿Qué zona te gustaría ver?</h2>
          <p class="instrucción">Haz click sobre la zona en el mapa de la izquierda</p>
        </div>


        <div class="contenedor">
            <img src="mapaoriginal.svg" usemap="#zonasChile" class="chico" alt="Mapa de Chile">

            <map name="zonasChile">
              <area shape="rect" coords="37,52,130,170" alt="Norte Grande" title="Norte Grande" onclick="mostrarZona('ngrande')" />
              <area shape="rect" coords="37,170,130,215" alt="Norte Chico" title="Norte Chico" onclick="mostrarZona('nchico')" />
              <area shape="rect" coords="37,215,130,300" alt="Zona Centro" title="Centro" onclick="mostrarZona('centro')" />
              <area shape="rect" coords="37,300,130,395" alt="Sur" title="Sur" onclick="mostrarZona('sur')" />
              <area shape="rect" coords="37,395,130,550" alt="Austral" title="Austral" onclick="mostrarZona('austral')" />
            </map>

            <div class="zonacontenido">
              <img id="avesImagen" src="nortegrande.png" class="nortegrande" alt="Aves Norte Grande" />
            </div>
        </div>


        <div class="rango">

            <h2 class="filtra">Filtra aves por cantidad de zonas en que habitan:</h2>

            <div class="zonaselector">
              <button onclick="filtrarPorZona(1)">1</button>
              <button onclick="filtrarPorZona(2)">2</button>
              <button onclick="filtrarPorZona(3)">3</button>
              <button onclick="filtrarPorZona(4)">4</button>
              <button onclick="filtrarPorZona(5)">5</button>
            </div>
        </div>

            <div id="resultado-aves" class="resultado-aves"></div>

        <script>
          let data = [];

          async function cargarDatos() {
            try {
              const consulta = await fetch("https://raw.githubusercontent.com/magdalenacorthorn/Trabajo-final/refs/heads/main/csvjsontres.json");
              data = await consulta.json();
              console.log("Datos cargados:", data);
              // Mostrar datos por defecto al cargar (por ejemplo, 5 zonas)
              filtrarPorZona(5);
            } catch (error) {
              console.error("Error cargando datos:", error);
              const contenedor = document.getElementById("resultado-aves");
              contenedor.innerHTML = "<p>Error al cargar datos. Intenta recargar la página.</p>";
            }
          }

          cargarDatos();

          function mostrarZona(zona) {
              const imagen = document.getElementById('avesImagen');

              if (zona === 'ngrande') {
                imagen.src = 'nortegrande.png';
                imagen.alt = 'Aves del Norte Grande';
              } else if (zona === 'nchico') {
                imagen.src = 'nortechico.png';
                imagen.alt = 'Aves del Norte Chico';
              } else if (zona === 'centro') {
                imagen.src = 'centro.png';
                imagen.alt = 'Aves de la Zona Centro';
              } else if (zona === 'sur') {
                imagen.src = 'sur.png';
                imagen.alt = 'Aves del Sur';
              } else if (zona === 'austral') {
                imagen.src = 'austral.png';
                imagen.alt = 'Aves de la Zona Austral';
              }
            }

          function filtrarPorZona(zonaCantidad) {
              const contenedor = document.getElementById("resultado-aves");
              contenedor.innerHTML = "";

              const botones = document.querySelectorAll(".zonaselector button");
              botones.forEach(boton => boton.classList.remove("activo"));

              const botonPresionado = document.querySelector(`.zonaselector button:nth-child(${zonaCantidad})`);
              if (botonPresionado) {
                botonPresionado.classList.add("activo");
              }

              const filtradas = data.filter(ave =>
                parseInt(ave.zona_total) === zonaCantidad &&
                typeof ave.habitat === "string" &&
                /valle/i.test(ave.habitat)
              );

              if (filtradas.length === 0) {
                contenedor.innerHTML = `<p>No se encontraron aves que vivan en el valle y habiten en ${zonaCantidad} zona(s).</p>`;
                return;
              }

              filtradas.forEach(ave => {
                const aveElemento = document.createElement("div");
                aveElemento.classList.add("ave");
                aveElemento.innerHTML = `
                  <h3>${ave.nombre_comun}</h3>
                  <p><strong>Región:</strong> ${ave.region}</p>
                  <p><strong>Hábitat:</strong> ${ave.habitat}</p>
                `;
                contenedor.appendChild(aveElemento);
              });
            }
        </script>

        <footer class="piepagina">
          <p>2025</p> <p>Hecho por Magdalena Corthorn</p> <p>Desarrollo Web y Diseño Visual de Información</p>
        </footer>

    </body>
</html>
